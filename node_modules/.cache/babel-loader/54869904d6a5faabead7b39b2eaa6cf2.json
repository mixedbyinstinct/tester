{"ast":null,"code":"import _slicedToArray from\"/home/dh_instincttoofye/instinctmxd.com/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate}from'react-router-dom';import React,{useEffect,useState}from'react';import{LoginContainer,LoginButton}from'../styles/Login.styled';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var history=useNavigate();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),print=_useState2[0],setPrint=_useState2[1];function handleLogin(e){e.preventDefault();var form=e.target;var user={username:form[0].value,password:form[1].value};axios.post(\"/login\",user,{headers:{\"Content-Type\":\"application/json\"}}).then(function(_ref){var data=_ref.data;//alert(data.token);\nlocalStorage.setItem(\"token\",data.token);setPrint(data.message);});}useEffect(function(){axios.get(\"/isUserAuth\",{headers:{\"x-access-token\":localStorage.getItem(\"token\")}}).then(function(_ref2){var data=_ref2.data;return data.isLoggedIn?history(\"/playlist\"):null;});},[]);return/*#__PURE__*/_jsx(LoginContainer,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(event){return handleLogin(event);},children:[/*#__PURE__*/_jsx(\"p\",{children:print}),/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"email\"}),/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"password\"}),/*#__PURE__*/_jsx(\"input\",{required:true,type:\"submit\",value:\"Submit\"})]})});};export default Login;","map":{"version":3,"names":["useNavigate","React","useEffect","useState","LoginContainer","LoginButton","axios","Login","history","print","setPrint","handleLogin","e","preventDefault","form","target","user","username","value","password","post","headers","then","data","localStorage","setItem","token","message","get","getItem","isLoggedIn","event"],"sources":["/home/dh_instincttoofye/instinctmxd.com/src/components/login.js"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\nimport React, { useEffect, useState } from 'react';\nimport { LoginContainer, LoginButton } from '../styles/Login.styled';\nimport axios from 'axios';\n\nconst Login = () => {\n    const history = useNavigate();\n    const [print, setPrint] = useState('');\n\n    function handleLogin(e) {\n        e.preventDefault();\n\n        const form = e.target;\n        const user = {\n            username: form[0].value,\n            password: form[1].value\n        }\n        axios.post(\"/login\", user, {\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        }).then(({data}) => {\n\t    //alert(data.token);\n            localStorage.setItem(\"token\", data.token);\n\t    setPrint(data.message);\n        })\n    }\n    useEffect(() => {\n        axios.get(\"/isUserAuth\", {\n            headers : {\n                \"x-access-token\": localStorage.getItem(\"token\")\n            }\n        }).then(({data}) => {\n            return data.isLoggedIn ? history(\"/playlist\") : null;\n        })\n    }, [])\n\n    return (\n        <LoginContainer>\n        <form onSubmit={event => handleLogin(event)}>\n\t    <p>{print}</p>\n        <label>Email:</label>\n<input required type=\"email\" />\n               <label>Password:</label>\n<input required type=\"password\" />\n               <input required type=\"submit\" value=\"Submit\"/>\n               </form>\n</LoginContainer>   \n)\n}\n\nexport default Login;\n"],"mappings":"6HAAA,OAASA,WAAT,KAA4B,kBAA5B,CACA,MAAOC,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,cAAT,CAAyBC,WAAzB,KAA4C,wBAA5C,CACA,MAAOC,MAAP,KAAkB,OAAlB,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CAChB,GAAMC,QAAO,CAAGR,WAAW,EAA3B,CACA,cAA0BG,QAAQ,CAAC,EAAD,CAAlC,wCAAOM,KAAP,eAAcC,QAAd,eAEA,QAASC,YAAT,CAAqBC,CAArB,CAAwB,CACpBA,CAAC,CAACC,cAAF,GAEA,GAAMC,KAAI,CAAGF,CAAC,CAACG,MAAf,CACA,GAAMC,KAAI,CAAG,CACTC,QAAQ,CAAEH,IAAI,CAAC,CAAD,CAAJ,CAAQI,KADT,CAETC,QAAQ,CAAEL,IAAI,CAAC,CAAD,CAAJ,CAAQI,KAFT,CAAb,CAIAZ,KAAK,CAACc,IAAN,CAAW,QAAX,CAAqBJ,IAArB,CAA2B,CACvBK,OAAO,CAAE,CACL,eAAgB,kBADX,CADc,CAA3B,EAIGC,IAJH,CAIQ,cAAY,IAAVC,KAAU,MAAVA,IAAU,CACvB;AACOC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,IAAI,CAACG,KAAnC,EACPhB,QAAQ,CAACa,IAAI,CAACI,OAAN,CAAR,CACI,CARD,EASH,CACDzB,SAAS,CAAC,UAAM,CACZI,KAAK,CAACsB,GAAN,CAAU,aAAV,CAAyB,CACrBP,OAAO,CAAG,CACN,iBAAkBG,YAAY,CAACK,OAAb,CAAqB,OAArB,CADZ,CADW,CAAzB,EAIGP,IAJH,CAIQ,eAAY,IAAVC,KAAU,OAAVA,IAAU,CAChB,MAAOA,KAAI,CAACO,UAAL,CAAkBtB,OAAO,CAAC,WAAD,CAAzB,CAAyC,IAAhD,CACH,CAND,EAOH,CARQ,CAQN,EARM,CAAT,CAUA,mBACI,KAAC,cAAD,wBACA,cAAM,QAAQ,CAAE,kBAAAuB,KAAK,QAAIpB,YAAW,CAACoB,KAAD,CAAf,EAArB,wBACH,mBAAItB,KAAJ,EADG,cAEA,iCAFA,cAGR,cAAO,QAAQ,KAAf,CAAgB,IAAI,CAAC,OAArB,EAHQ,cAIO,oCAJP,cAKR,cAAO,QAAQ,KAAf,CAAgB,IAAI,CAAC,UAArB,EALQ,cAMO,cAAO,QAAQ,KAAf,CAAgB,IAAI,CAAC,QAArB,CAA8B,KAAK,CAAC,QAApC,EANP,GADA,EADJ,CAYH,CA5CD,CA8CA,cAAeF,MAAf"},"metadata":{},"sourceType":"module"}